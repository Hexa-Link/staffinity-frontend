---
import DashboardLayout from '../layouts/DashboardLayout.astro';
import DataTable from '../components/DataTable.astro';

// Datos simulados de empleados
const employees = [
  { id: 'E001', name: 'Juan Pérez', email: 'juan@hexa-link.com', department: 'Ingeniería', position: 'Senior Developer', salary: '$4,500', startDate: '2023-01-15', status: 'Activo' },
  { id: 'E002', name: 'María García', email: 'maria@hexa-link.com', department: 'RR.HH.', position: 'HR Manager', salary: '$3,800', startDate: '2022-06-01', status: 'Activo' },
  { id: 'E003', name: 'Carlos López', email: 'carlos@hexa-link.com', department: 'Ventas', position: 'Sales Lead', salary: '$3,200', startDate: '2023-03-20', status: 'Activo' },
  { id: 'E004', name: 'Ana Martínez', email: 'ana@hexa-link.com', department: 'Producto', position: 'Product Manager', salary: '$4,200', startDate: '2022-11-10', status: 'En Vacaciones' },
  { id: 'E005', name: 'Roberto Silva', email: 'roberto@hexa-link.com', department: 'Finanzas', position: 'Accountant', salary: '$3,500', startDate: '2023-05-08', status: 'Activo' },
  { id: 'E006', name: 'Laura Gómez', email: 'laura@hexa-link.com', department: 'Marketing', position: 'Marketing Manager', salary: '$3,800', startDate: '2023-02-14', status: 'Activo' },
  { id: 'E007', name: 'Miguel Rodríguez', email: 'miguel@hexa-link.com', department: 'Ingeniería', position: 'Backend Developer', salary: '$4,000', startDate: '2023-04-01', status: 'Activo' },
  { id: 'E008', name: 'Sofía Fernández', email: 'sofia@hexa-link.com', department: 'Diseño', position: 'UX/UI Designer', salary: '$3,600', startDate: '2022-09-15', status: 'Activo' },
];

const columns = [
  { key: 'name', label: 'Nombre', sortable: true },
  { key: 'email', label: 'Correo', sortable: false },
  { key: 'department', label: 'Departamento', sortable: true },
  { key: 'position', label: 'Posición', sortable: true },
  { key: 'salary', label: 'Salario', sortable: true },
  { key: 'status', label: 'Estado', sortable: true },
];
---

<DashboardLayout title="Gestión de Empleados" currentPage="employees">
  
  <!-- Header con CTA -->
  <div class="flex justify-between items-center mb-8">
    <div>
      <h2 class="text-3xl font-bold text-[#0b0b0b] mb-2">Empleados</h2>
      <p class="text-[#6b7c7c]">Gestiona toda tu plantilla de empleados</p>
    </div>
    <button class="bg-[#0f615f] text-white px-6 py-3 rounded-lg font-semibold hover:bg-[#2d7a79] transition-all duration-200">
      + Agregar Empleado
    </button>
  </div>

  <!-- Filters -->
  <div class="bg-white border-2 border-[#c7dfdf] rounded-[14px] p-6 mb-8">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <div>
        <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Buscar</label>
        <input 
          type="text" 
          placeholder="Nombre o email..." 
          class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg focus:outline-none focus:border-[#0f615f]"
        />
      </div>
      <div>
        <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Departamento</label>
        <select class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg focus:outline-none focus:border-[#0f615f]">
          <option>Todos</option>
          <option>Ingeniería</option>
          <option>RR.HH.</option>
          <option>Ventas</option>
          <option>Finanzas</option>
          <option>Producto</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Estado</label>
        <select class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg focus:outline-none focus:border-[#0f615f]">
          <option>Todos</option>
          <option>Activo</option>
          <option>En Vacaciones</option>
          <option>Inactivo</option>
        </select>
      </div>
      <div class="flex items-end">
        <button class="w-full bg-[#0f615f] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#2d7a79] transition-all">
          Filtrar
        </button>
      </div>
    </div>
  </div>

  <!-- Employees Table -->
  <DataTable 
    title={`Total: ${employees.length} empleados`}
    columns={columns}
    rows={employees}
    actions={[
      { label: 'Ver Detalles' },
      { label: 'Editar' },
      { label: 'Eliminar' },
    ]}
  />

  <!-- Modal para crear/editar empleado (oculto por defecto) -->
  <div id="employeeModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
    <div class="bg-white rounded-[14px] p-8 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
      <h3 class="text-2xl font-bold text-[#0b0b0b] mb-6">Nuevo Empleado</h3>
      
      <form class="space-y-4">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Nombre</label>
            <input type="text" class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg" />
          </div>
          <div>
            <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Email</label>
            <input type="email" class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg" />
          </div>
          <div>
            <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Departamento</label>
            <select class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg">
              <option>Selecciona</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-[#0b0b0b] mb-2">Posición</label>
            <input type="text" class="w-full px-4 py-2 border-2 border-[#c7dfdf] rounded-lg" />
          </div>
        </div>
        
        <div class="flex space-x-4 pt-6 border-t-2 border-[#c7dfdf]">
          <button type="submit" class="flex-1 bg-[#0f615f] text-white px-4 py-2 rounded-lg font-semibold hover:bg-[#2d7a79]">
            Guardar
          </button>
          <button type="button" id="closeModal" class="flex-1 border-2 border-[#c7dfdf] text-[#0f615f] px-4 py-2 rounded-lg font-semibold hover:bg-[#eef6f6]">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    document.querySelectorAll('button:contains("Agregar")')[0]?.addEventListener('click', () => {
      document.getElementById('employeeModal')?.classList.remove('hidden');
    });
    
    document.getElementById('closeModal')?.addEventListener('click', () => {
      document.getElementById('employeeModal')?.classList.add('hidden');
    });
  </script>

</DashboardLayout>
