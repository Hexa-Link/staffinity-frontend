---
import DashboardLayout from '../layouts/DashboardLayout.astro';
import StatWidget from '../components/StatWidget.astro';
import DataTable from '../components/DataTable.astro';

// Datos simulados - En producci칩n vendr칤an de la API
const stats: Array<{title: string; value: string; subtitle: string; icon: string; trend: 'up' | 'down' | 'neutral'; trendValue: string}> = [
  { title: 'Empleados Activos', value: '127', subtitle: 'En la organizaci칩n', icon: '游논', trend: 'up', trendValue: '+5 este mes' },
  { title: 'Vacantes Abiertas', value: '8', subtitle: 'Posiciones disponibles', icon: '游눺', trend: 'neutral', trendValue: '2 en proceso' },
  { title: 'Productos en Stock', value: '1,250', subtitle: 'Inventario total', icon: '游닍', trend: 'down', trendValue: '-3% vs mes anterior' },
  { title: 'Ingresos del Mes', value: '$85,500', subtitle: 'Hasta la fecha', icon: '游눯', trend: 'up', trendValue: '+12% vs mes anterior' },
];

const recentEmployees = [
  { id: 'E001', name: 'Juan P칠rez', department: 'Ingenier칤a', position: 'Senior Developer', status: 'Activo' },
  { id: 'E002', name: 'Mar칤a Garc칤a', department: 'RR.HH.', position: 'HR Manager', status: 'Activo' },
  { id: 'E003', name: 'Carlos L칩pez', department: 'Ventas', position: 'Sales Lead', status: 'Activo' },
  { id: 'E004', name: 'Ana Mart칤nez', department: 'Producto', position: 'Product Manager', status: 'En Vacaciones' },
  { id: 'E005', name: 'Roberto Silva', department: 'Finanzas', position: 'Accountant', status: 'Activo' },
];

const employeeColumns = [
  { key: 'name', label: 'Nombre', sortable: true },
  { key: 'department', label: 'Departamento', sortable: true },
  { key: 'position', label: 'Posici칩n', sortable: false },
  { key: 'status', label: 'Estado', sortable: true },
];

const recentVacancies = [
  { id: 'V001', title: 'Frontend Developer Senior', department: 'Ingenier칤a', applicants: 12, status: 'Abierta' },
  { id: 'V002', title: 'Product Manager', department: 'Producto', applicants: 8, status: 'Abierta' },
  { id: 'V003', title: 'Data Analyst', department: 'Datos', applicants: 5, status: 'En Revisi칩n' },
];

const vacancyColumns = [
  { key: 'title', label: 'Posici칩n', sortable: true },
  { key: 'department', label: 'Departamento', sortable: true },
  { key: 'applicants', label: 'Aplicantes', sortable: true },
  { key: 'status', label: 'Estado', sortable: true },
];
---

<DashboardLayout title="Dashboard" currentPage="dashboard">
  
  <!-- Stats Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    {stats.map((stat) => (
      <StatWidget 
        title={stat.title}
        value={stat.value}
        subtitle={stat.subtitle}
        icon={stat.icon}
        trend={stat.trend}
        trendValue={stat.trendValue}
      />
    ))}
  </div>

  <!-- Charts/Analytics Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    
    <!-- Gr치fico de Tendencias -->
    <div class="bg-white border-2 border-[#c7dfdf] rounded-[14px] p-6">
      <h3 class="font-bold text-lg text-[#0b0b0b] mb-4">Ingresos vs Gastos</h3>
      <div class="h-64 flex items-center justify-center bg-[#eef6f6] rounded-lg text-[#6b7c7c]">
        <div class="text-center">
          <p class="text-2xl mb-2">游늳</p>
          <p>Gr치fico interactivo</p>
          <p class="text-sm text-[#6b7c7c]">(Integraci칩n con Chart.js)</p>
        </div>
      </div>
    </div>

    <!-- Actividad Reciente -->
    <div class="bg-white border-2 border-[#c7dfdf] rounded-[14px] p-6">
      <h3 class="font-bold text-lg text-[#0b0b0b] mb-4">Actividad Reciente</h3>
      <div class="space-y-4">
        {[
          { user: 'Juan P칠rez', action: 'Actualiz칩 perfil', time: 'hace 2 horas' },
          { user: 'Mar칤a Garc칤a', action: 'Cre칩 nueva vacante', time: 'hace 5 horas' },
          { user: 'Carlos L칩pez', action: 'Complet칩 una venta', time: 'hace 1 d칤a' },
          { user: 'Ana Mart칤nez', action: 'Aprob칩 reporte', time: 'hace 2 d칤as' },
        ].map((activity) => (
          <div class="flex items-center space-x-3 p-3 hover:bg-[#eef6f6] rounded transition-all">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-[#0f615f] to-[#2d7a79] flex items-center justify-center text-white text-sm font-semibold">
              {activity.user[0]}
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-medium text-sm text-[#0b0b0b]">{activity.user}</p>
              <p class="text-xs text-[#6b7c7c]">{activity.action}</p>
            </div>
            <p class="text-xs text-[#6b7c7c] whitespace-nowrap">{activity.time}</p>
          </div>
        ))}
      </div>
    </div>
  </div>

  <!-- Recent Employees Table -->
  <div class="mb-8">
    <DataTable 
      title="Empleados Recientes"
      columns={employeeColumns}
      rows={recentEmployees}
      actions={[
        { label: 'Ver', href: '/employees/E001' },
        { label: 'Editar' },
      ]}
    />
  </div>

  <!-- Recent Vacancies Table -->
  <div>
    <DataTable 
      title="Vacantes Activas"
      columns={vacancyColumns}
      rows={recentVacancies}
      actions={[
        { label: 'Ver Candidatos' },
        { label: 'Editar' },
      ]}
    />
  </div>

</DashboardLayout>
