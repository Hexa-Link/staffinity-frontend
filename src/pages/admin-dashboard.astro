---
// P√°gina: Admin Dashboard
import DashboardLayout from '../layouts/DashboardLayout.astro';
---

<DashboardLayout title="Admin Dashboard - HexaLink ERP">
  <style>
    .admin-dashboard {
      background: #0f172a;
      min-height: 100vh;
      padding: 2rem;
    }

    .dashboard-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .page-title {
      color: #f1f5f9;
      font-size: 2rem;
      font-weight: 700;
    }

    .header-actions {
      display: flex;
      gap: 1rem;
    }

    .btn-header {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.95rem;
    }

    .btn-primary {
      background: #0d9488;
      color: white;
    }

    .btn-primary:hover {
      background: #0e7490;
    }

    .btn-secondary {
      background: #334155;
      color: #cbd5e1;
    }

    .btn-secondary:hover {
      background: #475569;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .stat-card {
      background: linear-gradient(135deg, #1e293b 0%, #263549 100%);
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 2rem;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #0d9488 0%, #0e7490 100%);
    }

    .stat-card:nth-child(2)::before {
      background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);
    }

    .stat-card:nth-child(3)::before {
      background: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);
    }

    .stat-card:nth-child(4)::before {
      background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);
    }

    .stat-label {
      color: #94a3b8;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .stat-value {
      color: #f1f5f9;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .stat-change {
      color: #22c55e;
      font-size: 0.85rem;
    }

    .stat-change.negative {
      color: #ef4444;
    }

    /* Charts Section */
    .charts-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .chart-card {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 2rem;
    }

    .chart-title {
      color: #f1f5f9;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .bar-chart {
      display: flex;
      gap: 1rem;
      align-items: flex-end;
      height: 200px;
    }

    .bar {
      flex: 1;
      background: linear-gradient(180deg, #0d9488 0%, #0e7490 100%);
      border-radius: 8px 8px 0 0;
      min-height: 20px;
      position: relative;
      transition: all 0.3s;
    }

    .bar:hover {
      opacity: 0.8;
      transform: translateY(-5px);
    }

    .bar-label {
      position: absolute;
      bottom: -25px;
      left: 0;
      right: 0;
      text-align: center;
      color: #cbd5e1;
      font-size: 0.8rem;
    }

    .bar-value {
      position: absolute;
      top: -25px;
      left: 0;
      right: 0;
      text-align: center;
      color: #f1f5f9;
      font-weight: 600;
      font-size: 0.85rem;
    }

    /* Activity Section */
    .activity-section {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 3rem;
    }

    .activity-title {
      color: #f1f5f9;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .activity-timeline {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .activity-item {
      display: flex;
      gap: 1.5rem;
      align-items: flex-start;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
      background: #334155;
      color: #0d9488;
    }

    .activity-content {
      flex: 1;
    }

    .activity-description {
      color: #f1f5f9;
      margin-bottom: 0.25rem;
    }

    .activity-time {
      color: #94a3b8;
      font-size: 0.85rem;
    }

    /* Alerts */
    .alerts-section {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 2rem;
    }

    .alert-title {
      color: #f1f5f9;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .alert-item {
      display: flex;
      gap: 1rem;
      padding: 1rem;
      background: #263549;
      border-left: 4px solid #ef4444;
      border-radius: 8px;
      margin-bottom: 1rem;
      align-items: flex-start;
    }

    .alert-item.warning {
      border-left-color: #f59e0b;
    }

    .alert-item.info {
      border-left-color: #3b82f6;
    }

    .alert-content {
      flex: 1;
    }

    .alert-content strong {
      color: #f1f5f9;
      display: block;
      margin-bottom: 0.25rem;
    }

    .alert-content p {
      color: #cbd5e1;
      font-size: 0.9rem;
      margin: 0;
    }

    .btn-dismiss {
      background: none;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      font-size: 1.2rem;
    }

    .btn-dismiss:hover {
      color: #cbd5e1;
    }

    @media (max-width: 768px) {
      .page-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
      }

      .header-actions {
        width: 100%;
      }

      .charts-section {
        grid-template-columns: 1fr;
      }

      .bar-chart {
        height: 250px;
      }
    }
  </style>

  <div class="admin-dashboard">
    <div class="dashboard-container">
      <!-- Header -->
      <div class="page-header">
        <h1 class="page-title">Panel de Control Admin</h1>
        <div class="header-actions">
          <button class="btn-header btn-secondary">üìä Generar Reporte</button>
          <button class="btn-header btn-primary">‚öôÔ∏è Configuraci√≥n</button>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label">Total Empleados</div>
          <div class="stat-value">128</div>
          <div class="stat-change">‚Üë 5 esta semana</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Vacantes Abiertas</div>
          <div class="stat-value">12</div>
          <div class="stat-change">‚Üì 2 cerradas</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Candidatos en Revisi√≥n</div>
          <div class="stat-value">47</div>
          <div class="stat-change">‚Üë 8 nuevos</div>
        </div>

        <div class="stat-card">
          <div class="stat-label">Empleados en Vacaciones</div>
          <div class="stat-value">18</div>
          <div class="stat-change negative">‚Üë 3 nuevas solicitudes</div>
        </div>
      </div>

      <!-- Charts -->
      <div class="charts-section">
        <div class="chart-card">
          <h3 class="chart-title">üìà Empleados por Departamento</h3>
          <div class="bar-chart">
            <div class="bar" style="height: 80%;">
              <div class="bar-value">32</div>
              <div class="bar-label">Engineering</div>
            </div>
            <div class="bar" style="height: 45%;">
              <div class="bar-value">18</div>
              <div class="bar-label">Sales</div>
            </div>
            <div class="bar" style="height: 35%;">
              <div class="bar-value">14</div>
              <div class="bar-label">HR</div>
            </div>
            <div class="bar" style="height: 30%;">
              <div class="bar-value">12</div>
              <div class="bar-label">Finance</div>
            </div>
            <div class="bar" style="height: 25%;">
              <div class="bar-value">10</div>
              <div class="bar-label">Marketing</div>
            </div>
          </div>
        </div>

        <div class="chart-card">
          <h3 class="chart-title">üìä Solicitudes de Vacaciones por Mes</h3>
          <div class="bar-chart">
            <div class="bar" style="height: 60%;">
              <div class="bar-value">12</div>
              <div class="bar-label">Mayo</div>
            </div>
            <div class="bar" style="height: 75%;">
              <div class="bar-value">15</div>
              <div class="bar-label">Junio</div>
            </div>
            <div class="bar" style="height: 85%; background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%);">
              <div class="bar-value">17</div>
              <div class="bar-label">Julio</div>
            </div>
            <div class="bar" style="height: 45%;">
              <div class="bar-value">9</div>
              <div class="bar-label">Agosto</div>
            </div>
            <div class="bar" style="height: 40%;">
              <div class="bar-value">8</div>
              <div class="bar-label">Sept</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Activity Timeline -->
      <div class="activity-section">
        <h3 class="activity-title">‚è±Ô∏è Actividad Reciente</h3>
        <div class="activity-timeline">
          <div class="activity-item">
            <div class="activity-icon">‚úì</div>
            <div class="activity-content">
              <div class="activity-description">Empleado creado: <strong>Juan Garc√≠a</strong></div>
              <div class="activity-time">Hace 2 horas</div>
            </div>
          </div>

          <div class="activity-item">
            <div class="activity-icon">üìù</div>
            <div class="activity-content">
              <div class="activity-description">Solicitud de vacaciones aprobada de <strong>Mar√≠a L√≥pez</strong></div>
              <div class="activity-time">Hace 4 horas</div>
            </div>
          </div>

          <div class="activity-item">
            <div class="activity-icon">üíº</div>
            <div class="activity-content">
              <div class="activity-description">Nueva vacante creada: <strong>Senior Developer</strong></div>
              <div class="activity-time">Ayer a las 3:30 PM</div>
            </div>
          </div>

          <div class="activity-item">
            <div class="activity-icon">üîÑ</div>
            <div class="activity-content">
              <div class="activity-description">Sistema actualizado a versi√≥n <strong>2.1.0</strong></div>
              <div class="activity-time">Ayer a las 1:00 PM</div>
            </div>
          </div>

          <div class="activity-item">
            <div class="activity-icon">üìä</div>
            <div class="activity-content">
              <div class="activity-description">Reporte de n√≥mina exportado - <strong>Junio 2024</strong></div>
              <div class="activity-time">Hace 2 d√≠as</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Alerts -->
      <div class="alerts-section">
        <h3 class="alert-title">‚ö†Ô∏è Alertas del Sistema</h3>

        <div class="alert-item">
          <div class="alert-content">
            <strong>L√≠mite de almacenamiento alcanzado</strong>
            <p>El almacenamiento est√° al 88%. Se recomienda realizar una limpieza de archivos antigos.</p>
          </div>
          <button class="btn-dismiss">√ó</button>
        </div>

        <div class="alert-item warning">
          <div class="alert-content">
            <strong>Mantenimiento programado</strong>
            <p>Se realizar√° mantenimiento del servidor el domingo 14 de julio de 2:00 - 4:00 AM. El sistema estar√° fuera de servicio.</p>
          </div>
          <button class="btn-dismiss">√ó</button>
        </div>

        <div class="alert-item info">
          <div class="alert-content">
            <strong>Nueva versi√≥n disponible</strong>
            <p>Una actualizaci√≥n est√° disponible. Se recomienda actualizar a la versi√≥n 2.2.0 para mejorar el rendimiento.</p>
          </div>
          <button class="btn-dismiss">√ó</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Dismiss alerts
    document.querySelectorAll('.btn-dismiss').forEach(btn => {
      btn.addEventListener('click', (e: Event) => {
        const target = e.target as HTMLElement;
        target?.closest('.alert-item')?.remove();
      });
    });
  </script>
</DashboardLayout>
